<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My SCM Center Portal</title>
    
    <!-- 1. Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Load React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- 3. Load Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 4. Load Lucide Icons -->
    <script src="https://unpkg.com/lucide@0.295.0/dist/umd/lucide.min.js"></script>

    <style>
        /* Custom Animations */
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .animate-marquee {
            animation: marquee 30s linear infinite;
        }
        .animate-marquee:hover {
            animation-play-state: paused;
        }
        
        /* Glassmorphism Utilities */
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.03);
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICON HELPER COMPONENT ---
        const LucideIcon = ({ name, className, ...props }) => {
            const [svgContent, setSvgContent] = useState('');

            useEffect(() => {
                if (window.lucide && window.lucide.icons && window.lucide.icons[name]) {
                    const iconDef = window.lucide.icons[name];
                    if (typeof window.lucide.createElement === 'function') {
                        const svgElement = window.lucide.createElement(iconDef);
                        const currentClass = svgElement.getAttribute('class') || '';
                        svgElement.setAttribute('class', `${currentClass} ${className || ''}`.trim());
                        if (!props.width) svgElement.setAttribute('width', '24');
                        if (!props.height) svgElement.setAttribute('height', '24');
                        if (!props.strokeWidth) svgElement.setAttribute('stroke-width', '2');
                        Object.entries(props).forEach(([key, value]) => {
                             const attrName = key === 'strokeWidth' ? 'stroke-width' : key;
                             svgElement.setAttribute(attrName, value);
                        });
                        setSvgContent(svgElement.outerHTML);
                    }
                }
            }, [name, className, JSON.stringify(props)]);

            return <span dangerouslySetInnerHTML={{ __html: svgContent }} className={`inline-flex items-center justify-center ${className || ''}`} />;
        };

        // Icons Definition (Used for mapping string names to components)
        const AvailableIcons = [
            'Box', 'Home', 'Headphones', 'TrendingUp', 'Users', 'LogOut', 'Lock', 'User', 'Search', 'Bell', 
            'Activity', 'Truck', 'Package', 'AlertCircle', 'MessageSquare', 'Send', 'X', 'Bot', 'Minimize2', 
            'RefreshCw', 'DollarSign', 'AlertTriangle', 'Wrench', 'ShieldCheck', 'Sparkles', 'PenTool', 'Gem', 
            'Hammer', 'Construction', 'FileText', 'Receipt', 'ArrowRight', 'Factory', 'Pickaxe', 'Printer', 
            'FileCheck', 'PlayCircle', 'LayoutDashboard', 'Briefcase', 'Globe', 'ExternalLink', 'Folder', 
            'QrCode', 'ChevronDown', 'Settings', 'Plus', 'Trash2', 'Save'
        ];

        // --- REUSABLE AUTH MODAL ---
        const AuthModal = ({ isOpen, onClose, onSuccess, title, requiredUser, requiredPass }) => {
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');

            useEffect(() => {
                if(isOpen) {
                    setUsername('');
                    setPassword('');
                    setError('');
                }
            }, [isOpen]);

            const handleSubmit = (e) => {
                e.preventDefault();
                // Check credentials directly
                if (username === requiredUser && password === requiredPass) {
                    onSuccess();
                } else {
                    setError('Username atau Password salah!');
                }
            };

            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-fadeIn">
                    <div className="bg-white rounded-2xl p-6 w-full max-w-sm shadow-2xl relative">
                        <button onClick={onClose} className="absolute top-4 right-4 text-slate-400 hover:text-slate-600">
                            <LucideIcon name="X" className="w-5 h-5" />
                        </button>
                        
                        <div className="text-center mb-6">
                            <div className="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                <LucideIcon name="Lock" className="w-6 h-6 text-blue-600" />
                            </div>
                            <h3 className="text-lg font-bold text-slate-800">{title}</h3>
                            <p className="text-xs text-slate-500">Silakan login untuk melanjutkan.</p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-xs font-bold text-slate-600 mb-1">Username</label>
                                <input 
                                    type="text" 
                                    value={username}
                                    onChange={(e) => setUsername(e.target.value)}
                                    className="w-full px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
                                    placeholder="Username"
                                />
                            </div>
                            <div>
                                <label className="block text-xs font-bold text-slate-600 mb-1">Password</label>
                                <input 
                                    type="password" 
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className="w-full px-3 py-2 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"
                                    placeholder="Password"
                                />
                            </div>
                            
                            {error && (
                                <div className="p-2 bg-red-50 text-red-600 text-xs rounded-lg flex items-center gap-2">
                                    <LucideIcon name="AlertTriangle" className="w-4 h-4" /> {error}
                                </div>
                            )}

                            <button type="submit" className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2.5 rounded-xl transition-all shadow-md">
                                Login
                            </button>
                        </form>
                    </div>
                </div>
            );
        };

        const DashboardCard = ({ title, value, subtitle, icon, color, trend, onClick }) => (
            <div 
                className={`glass-panel rounded-2xl p-6 transition-all hover:-translate-y-1 ${onClick ? 'cursor-pointer hover:shadow-lg hover:border-blue-300' : ''}`}
                onClick={onClick}
            >
                <div className="flex justify-between items-start mb-4">
                    <div className={`p-3 rounded-xl ${color} bg-opacity-10`}>
                        <LucideIcon name={icon} className={`w-6 h-6 ${color.replace('bg-', 'text-').replace('-500', '-600')}`} />
                    </div>
                    {trend && (
                        <span className={`text-xs px-2 py-1 rounded-full font-medium ${trend === 'up' ? 'bg-emerald-100 text-emerald-600' : 'bg-red-100 text-red-600'}`}>
                            {trend === 'up' ? '+2.4%' : '-1.2%'}
                        </span>
                    )}
                </div>
                <h3 className="text-slate-500 text-sm font-medium">{title}</h3>
                <p className="text-2xl font-bold text-slate-800 mt-1">{value}</p>
                <p className="text-slate-400 text-xs mt-1">{subtitle}</p>
            </div>
        );

        // --- ADMIN DASHBOARD COMPONENT ---
        const AdminDashboard = ({ menuItems, setMenuItems }) => {
            const [newMenu, setNewMenu] = useState({ id: '', label: '', icon: 'Box', url: '' });
            const [newSubMenu, setNewSubMenu] = useState({ parentId: '', label: '', icon: 'Box', url: '' });

            const handleAddMenu = (e) => {
                e.preventDefault();
                if(!newMenu.id || !newMenu.label) return alert("ID dan Label wajib diisi");
                
                const newItem = {
                    id: newMenu.id,
                    label: newMenu.label,
                    icon: newMenu.icon,
                    url: newMenu.url || null
                };

                const updated = [...menuItems, newItem];
                setMenuItems(updated);
                localStorage.setItem('scm_menu_config', JSON.stringify(updated));
                setNewMenu({ id: '', label: '', icon: 'Box', url: '' });
                alert("Menu utama berhasil ditambahkan!");
            };

            const handleAddSubMenu = (e) => {
                e.preventDefault();
                if(!newSubMenu.parentId || !newSubMenu.label || !newSubMenu.url) return alert("Parent, Label, dan URL wajib diisi");

                const updated = menuItems.map(item => {
                    if (item.id === newSubMenu.parentId) {
                        const existingSub = item.submenu || [];
                        const newSubId = newSubMenu.label.replace(/\s+/g, '') + Date.now();
                        return {
                            ...item,
                            submenu: [...existingSub, {
                                id: newSubId,
                                label: newSubMenu.label,
                                icon: newSubMenu.icon,
                                url: newSubMenu.url
                            }]
                        };
                    }
                    return item;
                });

                setMenuItems(updated);
                localStorage.setItem('scm_menu_config', JSON.stringify(updated));
                setNewSubMenu({ parentId: '', label: '', icon: 'Box', url: '' });
                alert("Sub menu berhasil ditambahkan!");
            };

            const handleDeleteMenu = (id) => {
                if(!confirm("Yakin hapus menu ini?")) return;
                const updated = menuItems.filter(m => m.id !== id);
                setMenuItems(updated);
                localStorage.setItem('scm_menu_config', JSON.stringify(updated));
            };

            const handleResetDefault = () => {
                if(!confirm("Kembalikan ke pengaturan awal? Semua menu custom akan hilang.")) return;
                localStorage.removeItem('scm_menu_config');
                window.location.reload();
            };

            return (
                <div className="animate-fadeIn space-y-8 pb-10">
                    <div className="bg-slate-800 rounded-3xl p-8 text-white relative overflow-hidden">
                         <div className="relative z-10">
                            <h2 className="text-3xl font-bold mb-2">Admin Configuration</h2>
                            <p className="text-slate-300">Kelola struktur menu dan navigasi aplikasi.</p>
                            <button onClick={handleResetDefault} className="mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm font-bold flex items-center gap-2">
                                <LucideIcon name="RefreshCw" className="w-4 h-4" /> Reset ke Default
                            </button>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        {/* FORM ADD MAIN MENU */}
                        <div className="glass-panel p-6 rounded-2xl">
                            <h3 className="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <LucideIcon name="Plus" className="w-5 h-5 text-blue-600" /> Tambah Menu Utama
                            </h3>
                            <form onSubmit={handleAddMenu} className="space-y-4">
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-xs font-bold text-slate-500 mb-1">ID (Unik)</label>
                                        <input type="text" className="w-full p-2 rounded border" placeholder="Contoh: GudangBaru" value={newMenu.id} onChange={e => setNewMenu({...newMenu, id: e.target.value})} />
                                    </div>
                                    <div>
                                        <label className="block text-xs font-bold text-slate-500 mb-1">Label</label>
                                        <input type="text" className="w-full p-2 rounded border" placeholder="Nama Menu" value={newMenu.label} onChange={e => setNewMenu({...newMenu, label: e.target.value})} />
                                    </div>
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-xs font-bold text-slate-500 mb-1">Icon</label>
                                        <select className="w-full p-2 rounded border" value={newMenu.icon} onChange={e => setNewMenu({...newMenu, icon: e.target.value})}>
                                            {AvailableIcons.map(ic => <option key={ic} value={ic}>{ic}</option>)}
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-xs font-bold text-slate-500 mb-1">URL (Opsional)</label>
                                        <input type="text" className="w-full p-2 rounded border" placeholder="https://..." value={newMenu.url} onChange={e => setNewMenu({...newMenu, url: e.target.value})} />
                                    </div>
                                </div>
                                <button type="submit" className="w-full py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700">Simpan Menu</button>
                                <p className="text-xs text-slate-400 italic">*Jika URL kosong, menu akan dianggap sebagai Tab Internal atau Container Submenu.</p>
                            </form>
                        </div>

                         {/* FORM ADD SUB MENU */}
                         <div className="glass-panel p-6 rounded-2xl">
                            <h3 className="text-lg font-bold text-slate-800 mb-4 flex items-center gap-2">
                                <LucideIcon name="List" className="w-5 h-5 text-green-600" /> Tambah Sub Menu
                            </h3>
                            <form onSubmit={handleAddSubMenu} className="space-y-4">
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 mb-1">Pilih Menu Induk</label>
                                    <select className="w-full p-2 rounded border" value={newSubMenu.parentId} onChange={e => setNewSubMenu({...newSubMenu, parentId: e.target.value})}>
                                        <option value="">-- Pilih Menu --</option>
                                        {menuItems.map(m => <option key={m.id} value={m.id}>{m.label}</option>)}
                                    </select>
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-xs font-bold text-slate-500 mb-1">Label Submenu</label>
                                        <input type="text" className="w-full p-2 rounded border" placeholder="Nama Submenu" value={newSubMenu.label} onChange={e => setNewSubMenu({...newSubMenu, label: e.target.value})} />
                                    </div>
                                    <div>
                                        <label className="block text-xs font-bold text-slate-500 mb-1">Icon</label>
                                        <select className="w-full p-2 rounded border" value={newSubMenu.icon} onChange={e => setNewSubMenu({...newSubMenu, icon: e.target.value})}>
                                            {AvailableIcons.map(ic => <option key={ic} value={ic}>{ic}</option>)}
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label className="block text-xs font-bold text-slate-500 mb-1">Link URL</label>
                                    <input type="text" className="w-full p-2 rounded border" placeholder="https://..." value={newSubMenu.url} onChange={e => setNewSubMenu({...newSubMenu, url: e.target.value})} />
                                </div>
                                <button type="submit" className="w-full py-2 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700">Simpan Submenu</button>
                            </form>
                        </div>
                    </div>

                    {/* LIST MENU TABLE */}
                    <div className="glass-panel p-6 rounded-2xl overflow-x-auto">
                        <h3 className="text-lg font-bold text-slate-800 mb-4">Daftar Menu Aktif</h3>
                        <table className="w-full text-sm text-left">
                            <thead className="bg-slate-100 text-slate-600">
                                <tr>
                                    <th className="p-3 rounded-l-lg">ID</th>
                                    <th className="p-3">Label</th>
                                    <th className="p-3">Type</th>
                                    <th className="p-3">Action</th>
                                </tr>
                            </thead>
                            <tbody className="divide-y divide-slate-100">
                                {menuItems.map(item => (
                                    <tr key={item.id}>
                                        <td className="p-3 font-mono text-xs">{item.id}</td>
                                        <td className="p-3 font-bold">{item.label}</td>
                                        <td className="p-3">
                                            {item.submenu ? (
                                                <span className="bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs">Dropdown ({item.submenu.length})</span>
                                            ) : item.url ? (
                                                <span className="bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs">External Link</span>
                                            ) : (
                                                <span className="bg-slate-100 text-slate-700 px-2 py-1 rounded text-xs">Internal Page</span>
                                            )}
                                        </td>
                                        <td className="p-3">
                                            <button onClick={() => handleDeleteMenu(item.id)} className="p-1.5 bg-red-100 text-red-600 rounded hover:bg-red-200">
                                                <LucideIcon name="Trash2" className="w-4 h-4" />
                                            </button>
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
            );
        };

        // --- COMPONENTS HALAMAN LAINNYA ---
        // (Sama seperti sebelumnya, hanya disesuaikan icon prop nya menjadi string)

        const HomeContent = ({ onNavigate }) => {
             const [rates, setRates] = useState([
                { code: 'USD', buy: 15450, sell: 15600 },
                { code: 'SGD', buy: 11450, sell: 11600 },
                { code: 'EUR', buy: 16800, sell: 17100 },
                { code: 'CNY', buy: 2150, sell: 2250 },
            ]);

            const feedItems = [
                { id: 1, text: "Shipment trading telah tiba di Plant Perawang", status: "Delivered", time: "Just now" },
                { id: 2, text: "Shipment trading Patimban On Process waiting approval", status: "Pending", time: "15 mins ago" },
                { id: 3, text: "Shipment trading telah tiba di Plant IKPP", status: "Delivered", time: "45 mins ago" }
            ];

            const openStockList = () => {
                window.open('https://my-scm.github.io/Stock/', '_blank');
            };

            return (
                <div className="space-y-6 animate-fadeIn">
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <DashboardCard 
                            title="Total Inventory" value="14,203" subtitle="Unit dalam gudang (Klik untuk Detail)" 
                            icon="Package" color="bg-blue-500" trend="up" onClick={openStockList} 
                        />
                        <DashboardCard title="Inbound Today" value="24" subtitle="Trucks arriving" icon="Truck" color="bg-emerald-500" trend="up" />
                        <DashboardCard title="Pending Issues" value="3" subtitle="Butuh approval ops" icon="AlertCircle" color="bg-amber-500" trend="down" />
                        <DashboardCard 
                            title="Trading Vol" value="$45.2k" subtitle="Daily run rate (Klik untuk Menu)" 
                            icon="Activity" color="bg-purple-500" trend="up" onClick={() => onNavigate && onNavigate('Trading')}
                        />
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {/* Video Card */}
                        <div className="glass-panel rounded-3xl p-3 shadow-md h-full flex flex-col justify-center">
                            <div className="flex items-center gap-2 mb-3 px-2">
                                <div className="p-1 bg-red-100 rounded-lg"><LucideIcon name="PlayCircle" className="w-4 h-4 text-red-600" /></div>
                                <span className="text-sm font-bold text-slate-700">Company Update</span>
                            </div>
                            <div className="relative w-full h-0 pb-[56.25%] rounded-2xl overflow-hidden bg-slate-900 shadow-inner mt-auto mb-auto">
                                <iframe src="https://drive.google.com/file/d/1uOpD0o901fWEYRpKXc1TlYWnrbSjsAKA/preview" className="absolute top-0 left-0 w-full h-full" allow="autoplay" allowFullScreen></iframe>
                            </div>
                        </div>

                        {/* Feed Card */}
                        <div className="glass-panel rounded-3xl p-6 h-full flex flex-col">
                            <h3 className="text-slate-800 font-bold text-lg mb-6 flex items-center gap-2 shrink-0">
                                <div className="p-1.5 bg-blue-100 rounded-lg"><LucideIcon name="Activity" className="text-blue-600 w-5 h-5" /></div>
                                Live Feed
                            </h3>
                            <div className="space-y-3 flex-1">
                                {feedItems.map((item) => (
                                    <div key={item.id} className="flex items-center gap-3 p-3 rounded-2xl bg-white border border-slate-100 hover:border-blue-200 transition-all cursor-pointer">
                                        <div className={`w-8 h-8 rounded-full flex items-center justify-center border shrink-0 ${item.status === 'Pending' ? 'bg-amber-50 border-amber-100' : 'bg-blue-50 border-blue-100'}`}>
                                            <LucideIcon name="Package" className={`w-4 h-4 ${item.status === 'Pending' ? 'text-amber-600' : 'text-blue-600'}`} />
                                        </div>
                                        <div className="flex-1 min-w-0">
                                            <p className="text-slate-700 text-xs font-semibold capitalize truncate">{item.text}</p>
                                            <p className="text-slate-400 text-[10px] mt-0.5">{item.time}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Forex Card */}
                        <div className="bg-gradient-to-br from-indigo-800 to-blue-900 rounded-3xl p-6 text-white relative overflow-hidden shadow-xl h-full flex flex-col">
                            <div className="absolute top-0 right-0 p-16 bg-white/10 rounded-full blur-3xl transform translate-x-10 -translate-y-10"></div>
                            <div className="relative z-10 flex flex-col h-full">
                                <h3 className="font-bold text-lg flex items-center gap-2 mb-6 shrink-0"><LucideIcon name="DollarSign" className="w-5 h-5 text-green-300" /> Kurs Valas</h3>
                                <div className="bg-white/10 backdrop-blur-md border border-white/10 rounded-2xl p-1 flex-1">
                                    <div className="grid grid-cols-3 text-[10px] uppercase text-blue-200 font-bold p-2 border-b border-white/10">
                                        <span>Mata Uang</span><span className="text-right">Beli</span><span className="text-right">Jual</span>
                                    </div>
                                    <div className="divide-y divide-white/10">
                                        {rates.map((rate) => (
                                            <div key={rate.code} className="grid grid-cols-3 items-center p-2.5">
                                                <div className="flex items-center gap-2"><span className="font-bold text-sm">{rate.code}</span></div>
                                                <div className="text-right font-mono text-sm text-green-300">{rate.buy.toLocaleString()}</div>
                                                <div className="text-right font-mono text-sm text-red-300">{rate.sell.toLocaleString()}</div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const OpsSupportContent = () => {
            const categories = [
                { title: "Pemeliharaan Pabrik", icon: "Factory", desc: "Maintenance rutin & perbaikan mesin", color: "bg-orange-500" },
                { title: "Security & Safety", icon: "ShieldCheck", desc: "Patroli, akses kontrol & HSE", color: "bg-blue-600" },
                { title: "Cleaning Service", icon: "Sparkles", desc: "Kebersihan area plant & kantor", color: "bg-cyan-500" },
                { title: "ATK & Supplies", icon: "PenTool", desc: "Permintaan alat tulis & consumables", color: "bg-emerald-500" },
                { title: "Support Lainnya", icon: "Headphones", desc: "Bantuan umum operasional", color: "bg-slate-500" }
            ];

            return (
                <div className="animate-fadeIn space-y-8">
                    <div className="bg-orange-600 rounded-3xl p-8 text-white relative overflow-hidden shadow-lg shadow-orange-200">
                        <div className="relative z-10 max-w-2xl">
                            <h2 className="text-3xl font-bold mb-2">Operations Support Center</h2>
                            <p className="text-orange-100">Pusat layanan dukungan operasional pabrik dan fasilitas umum.</p>
                        </div>
                        <div className="absolute right-0 bottom-0 opacity-20 transform translate-x-10 translate-y-10">
                            <LucideIcon name="Wrench" className="w-64 h-64" />
                        </div>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {categories.map((cat, idx) => (
                            <div key={idx} className="glass-panel p-6 rounded-2xl group hover:border-orange-300 transition-all cursor-pointer">
                                <div className={`w-12 h-12 rounded-xl ${cat.color} flex items-center justify-center mb-4 text-white shadow-lg shadow-orange-500/20 group-hover:scale-110 transition-transform`}>
                                    <LucideIcon name={cat.icon} className="w-6 h-6" />
                                </div>
                                <h3 className="text-lg font-bold text-slate-800 mb-1">{cat.title}</h3>
                                <p className="text-sm text-slate-500 mb-4">{cat.desc}</p>
                                <button className="text-orange-600 text-sm font-semibold flex items-center gap-1 hover:gap-2 transition-all">
                                    Buat Tiket <LucideIcon name="ArrowRight" className="w-4 h-4" />
                                </button>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const TradingContent = () => {
            const [modalConfig, setModalConfig] = useState({ isOpen: false, url: '', title: '' });
            const products = [
                { name: "Batu Kapur", type: "Raw Material", stock: "High", icon: "Construction" },
                { name: "Limestone", type: "Raw Material", stock: "Medium", icon: "Gem" },
                { name: "CAO (Kalsium Oksida)", type: "Processed", stock: "Low", icon: "Factory" },
                { name: "Mineral Mix", type: "Compound", stock: "High", icon: "Pickaxe" },
                { name: "Batu Split", type: "Construction", stock: "Very High", icon: "Hammer" },
                { name: "Bahan Bangunan", type: "General", stock: "Medium", icon: "Package" }
            ];
            const openTrading = () => setModalConfig({ isOpen: true, url: "https://myscm-app.github.io/SPJ-Trading/", title: 'Login Akses Trading' });
            return (
                <div className="animate-fadeIn space-y-8">
                    <AuthModal isOpen={modalConfig.isOpen} onClose={() => setModalConfig({ ...modalConfig, isOpen: false })} onSuccess={() => { window.open(modalConfig.url, '_blank'); setModalConfig({ ...modalConfig, isOpen: false }); }} title={modalConfig.title} requiredUser="admin" requiredPass="admin123" />
                    <div className="bg-gradient-to-r from-purple-800 to-indigo-900 rounded-3xl p-8 text-white shadow-lg shadow-indigo-200">
                        <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-6">
                            <div><h2 className="text-3xl font-bold mb-2">Trading Commodities</h2><p className="text-purple-200">Informasi stok dan harga pasar komoditas terkini.</p></div>
                            <div className="flex gap-3">
                                <button onClick={openTrading} className="flex items-center gap-2 px-4 py-3 bg-white/10 hover:bg-white/20 backdrop-blur-md rounded-xl border border-white/20 transition-all font-semibold text-sm"><LucideIcon name="Printer" className="w-4 h-4 text-purple-200" /> Surat Jalan Trading <LucideIcon name="Lock" className="w-3 h-3 text-purple-200 ml-1" /></button>
                                <button onClick={() => window.open("https://myscm-app.github.io/SPJ/", '_blank')} className="flex items-center gap-2 px-4 py-3 bg-indigo-500 hover:bg-indigo-600 rounded-xl border border-indigo-400/50 shadow-lg shadow-indigo-500/30 transition-all font-semibold text-sm"><LucideIcon name="FileCheck" className="w-4 h-4 text-white" /> Surat Jalan MKI</button>
                            </div>
                        </div>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">{products.map((prod, idx) => (<div key={idx} className="bg-white border border-slate-100 p-5 rounded-2xl shadow-sm hover:shadow-md transition-all relative overflow-hidden group"><div className="absolute top-0 right-0 w-24 h-24 bg-purple-50 rounded-bl-full -mr-4 -mt-4 transition-all group-hover:bg-purple-100"></div><div className="relative z-10 flex items-start gap-4"><div className="w-14 h-14 bg-white border border-purple-100 rounded-xl flex items-center justify-center shadow-sm text-purple-600"><LucideIcon name={prod.icon} className="w-7 h-7" /></div><div><h3 className="text-lg font-bold text-slate-800">{prod.name}</h3><span className="text-xs px-2 py-0.5 bg-slate-100 text-slate-500 rounded-full font-medium">{prod.type}</span></div></div><div className="mt-6 flex justify-between items-end border-t border-slate-50 pt-4"><div><div className="text-xs text-slate-400">Status Stok</div><div className={`text-sm font-bold ${prod.stock === 'Low' ? 'text-red-500' : 'text-emerald-600'}`}>{prod.stock} Availability</div></div><button className="p-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-lg shadow-purple-200"><LucideIcon name="TrendingUp" className="w-4 h-4" /></button></div></div>))}</div></div>
            );
        };

        const KoperasiContent = () => {
            const [modalConfig, setModalConfig] = useState({ isOpen: false, url: '', title: '' });
            const menuLinks = [
                { title: "Surat Order", icon: "FileText", url: "https://script.google.com/macros/s/AKfycbykGfqICBi6F1HKZa371cVAgbhzzBJo_l34gVQjjLx3s0BM8Z8JHhSx8cQN9ZfO-47p/exec", color: "bg-emerald-600", desc: "Buat pesanan barang koperasi" },
                { title: "Proforma Invoice", icon: "Receipt", url: "https://script.google.com/macros/s/AKfycbyOic9Ob4xeBZ-5UMbV6AnYoR-NQ_1cd-ar-phIUsiEIrE14koNiNKzOkAFwp8oMF-N/exec", color: "bg-teal-600", desc: "Cek tagihan & invoice sementara" }
            ];
            const handleLinkClick = (menu) => setModalConfig({ isOpen: true, url: menu.url, title: `Login ${menu.title}` });
            return (
                <div className="animate-fadeIn min-h-[60vh] flex flex-col items-center justify-center">
                    <AuthModal isOpen={modalConfig.isOpen} onClose={() => setModalConfig({ ...modalConfig, isOpen: false })} onSuccess={() => { window.open(modalConfig.url, '_blank'); setModalConfig({ ...modalConfig, isOpen: false }); }} title={modalConfig.title} requiredUser="admin" requiredPass="kawanmki01" />
                    <div className="w-full max-w-4xl mx-auto">
                        <div className="text-center mb-10"><div className="inline-flex p-3 bg-emerald-100 rounded-2xl mb-4"><LucideIcon name="Users" className="w-8 h-8 text-emerald-600" /></div><h2 className="text-3xl font-bold text-slate-800">E-Koperasi Portal</h2><p className="text-slate-500 mt-2">Layanan mandiri anggota koperasi. Silakan pilih menu di bawah ini.</p></div>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8 px-4">{menuLinks.map((menu, idx) => (<button key={idx} onClick={() => handleLinkClick(menu)} className="group relative overflow-hidden bg-white rounded-3xl p-8 border border-slate-200 shadow-lg hover:shadow-2xl hover:border-emerald-300 transition-all duration-300 transform hover:-translate-y-2 w-full text-left"><div className={`absolute top-0 right-0 w-32 h-32 ${menu.color} opacity-10 rounded-bl-full group-hover:scale-150 transition-transform duration-500`}></div><div className="relative z-10 flex flex-col h-full justify-between"><div className={`w-16 h-16 rounded-2xl ${menu.color} flex items-center justify-center text-white shadow-lg mb-6`}><LucideIcon name={menu.icon} className="w-8 h-8" /></div><div><h3 className="text-2xl font-bold text-slate-800 mb-2 group-hover:text-emerald-700 transition-colors">{menu.title}</h3><p className="text-slate-500 mb-6">{menu.desc}</p><span className="inline-flex items-center gap-2 text-sm font-bold text-slate-800 group-hover:gap-4 transition-all">Akses Sekarang <LucideIcon name="Lock" className="w-4 h-4 text-emerald-600" /></span></div></div></button>))}</div>
                    </div>
                </div>
            );
        };

        const ERPContent = () => {
            const erpLinks = [
                { title: "Business Central", url: "https://mitrakiara-bc.com/BusinessCentral/SignIn?ReturnUrl=%2FBusinessCentral%2F", icon: "Factory", color: "bg-teal-600", desc: "Sistem ERP Business Central (Dynamic Link)" },
                { title: "Shipment SIG", url: "https://pantau.sig.id/pantau/index.sggrp.php", icon: "Truck", color: "bg-blue-600", desc: "Pantau pengiriman SIG secara realtime" },
                { title: "CSMS Online", url: "https://csms.sig.id/sdonline/login.php", icon: "ShieldCheck", color: "bg-orange-500", desc: "Contractor Safety Management System" },
                { title: "MyScm Portal", url: "https://myscm-app.github.io/myscm-login/", icon: "LayoutDashboard", color: "bg-indigo-600", desc: "Akses login ke My Supply Chain Management" }
            ];
            return (
                 <div className="animate-fadeIn space-y-8">
                    <div className="bg-slate-800 rounded-3xl p-8 text-white relative overflow-hidden shadow-lg shadow-slate-300">
                        <div className="relative z-10 max-w-2xl"><h2 className="text-3xl font-bold mb-2">ERP & External Systems</h2><p className="text-slate-300">Pusat akses cepat ke aplikasi ERP, sistem pemantauan, dan portal manajemen eksternal.</p></div>
                         <div className="absolute right-0 bottom-0 opacity-10 transform translate-x-10 translate-y-10"><LucideIcon name="Activity" className="w-64 h-64" /></div>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">{erpLinks.map((link, idx) => (<a href={link.url} target="_blank" rel="noopener noreferrer" key={idx} className="glass-panel p-6 rounded-2xl group hover:border-blue-300 transition-all cursor-pointer flex items-center gap-6 hover:-translate-y-1 hover:shadow-xl"><div className={`w-16 h-16 rounded-2xl ${link.color} flex items-center justify-center text-white shadow-lg group-hover:scale-110 transition-transform shrink-0`}><LucideIcon name={link.icon} className="w-8 h-8" /></div><div><h3 className="text-xl font-bold text-slate-800 mb-1 group-hover:text-blue-700 transition-colors flex items-center gap-2">{link.title}<LucideIcon name="ExternalLink" className="w-4 h-4 text-slate-400" /></h3><p className="text-sm text-slate-500">{link.desc}</p></div><div className="ml-auto"><LucideIcon name="ArrowRight" className="w-5 h-5 text-slate-300 group-hover:text-blue-600 transition-colors" /></div></a>))}</div>
                </div>
            );
        };

        const DashboardInventoryContent = () => (
            <div className="w-full h-[85vh] bg-white rounded-3xl overflow-hidden shadow-sm border border-slate-200 relative">
                <div className="absolute inset-0 flex items-center justify-center bg-slate-50">
                    <div className="text-center">
                        <LucideIcon name="LayoutDashboard" className="w-16 h-16 text-slate-300 mx-auto mb-4" />
                        <h3 className="font-bold text-slate-600">Inventory Dashboard</h3>
                        <p className="text-sm text-slate-400">Memuat data...</p>
                        <a href="https://script.google.com/macros/s/AKfycbzM5MksdebCt3Ua7fCDoiV3uq9K0Q25NBsacZnkDdZLwmO0dUfKokBM2tkprmmFUKVfPw/exec" target="_blank" className="mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-bold">Buka Fullscreen</a>
                    </div>
                </div>
            </div>
        );

        const InventoryContent = () => (
            <div className="animate-fadeIn flex flex-col h-[80vh] w-full">
                <div className="bg-white/80 backdrop-blur-md border border-white/60 p-4 rounded-t-3xl shadow-sm flex justify-between items-center">
                    <div className="flex items-center gap-3">
                        <div className="p-2 bg-blue-100 rounded-xl"><LucideIcon name="Box" className="w-5 h-5 text-blue-600" /></div>
                        <div><h3 className="font-bold text-slate-800">Sistem Manajemen Inventaris</h3><p className="text-xs text-slate-500">Terhubung ke Aplikasi Gudang Pusat</p></div>
                    </div>
                    <a href="https://script.google.com/macros/s/AKfycbyfxx-1B9TAINHUuT4-Zglv_vI3L8QaqzIwMIrlycLofcaaFfdCqJRJUrACewkCLPSi/exec" target="_blank" rel="noopener noreferrer" className="flex items-center gap-2 text-xs font-semibold text-blue-600 hover:text-blue-800 hover:bg-blue-50 px-3 py-1.5 rounded-lg transition-colors">Buka di Tab Baru <LucideIcon name="ArrowRight" className="w-3 h-3" /></a>
                </div>
                <div className="flex-1 bg-white border-x border-b border-white/60 rounded-b-3xl shadow-sm overflow-hidden relative">
                    <iframe src="https://script.google.com/macros/s/AKfycbyfxx-1B9TAINHUuT4-Zglv_vI3L8QaqzIwMIrlycLofcaaFfdCqJRJUrACewkCLPSi/exec" className="w-full h-full border-0" title="Inventory System" allow="geolocation; microphone; camera"></iframe>
                </div>
            </div>
        );

        const FooterTicker = () => {
            const [newsItems] = useState(["üöÄ LOGISTIK 2025: Industri logistik nasional diprediksi melesat", "‚ö†Ô∏è INDUSTRI SEMEN: Utilisasi pabrik masih rendah (56,5%)", "‚ôªÔ∏è SUPPLY CHAIN: Tren Green Logistics & keberlanjutan", "üì¶ WAREHOUSE: Stock Opname Gudang Cikarang dimulai besok"]);
            return (
                <div className="fixed bottom-0 left-0 w-full z-[60] h-10 bg-slate-900 border-t border-slate-700 flex items-center shadow-2xl">
                    <div className="h-full bg-red-600 px-4 flex items-center gap-2 z-20 shadow-lg relative shrink-0"><LucideIcon name="AlertTriangle" className="w-3.5 h-3.5 text-white" /><span className="text-[10px] font-black text-white tracking-widest uppercase">SCM UPDATES</span></div>
                    <div className="flex-1 overflow-hidden relative h-full flex items-center bg-slate-900"><div className="animate-marquee whitespace-nowrap absolute flex items-center gap-12 pl-4">{[...newsItems, ...newsItems].map((item, idx) => (<span key={idx} className="text-xs font-medium text-slate-300 flex items-center gap-2"><span className="w-1.5 h-1.5 rounded-full shadow-[0_0_8px] bg-cyan-400 shadow-cyan-400"></span>{item}</span>))}</div></div>
                </div>
            );
        };

        const ChatWidget = () => {
            const [isOpen, setIsOpen] = useState(false);
            return (
                <div className="fixed bottom-16 right-6 z-50 flex flex-col items-end gap-4 font-sans mb-4">
                    {isOpen && (<div className="bg-white/90 backdrop-blur-xl border border-white/60 w-80 h-[400px] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in slide-in-from-bottom-10 ring-1 ring-black/5"><div className="bg-blue-600 p-4 text-white flex justify-between items-center"><div className="flex items-center gap-2"><LucideIcon name="Bot" className="w-5 h-5" /><span className="font-bold text-sm">SCM Assistant</span></div><button onClick={() => setIsOpen(false)}><LucideIcon name="X" className="w-4 h-4" /></button></div><div className="flex-1 p-4 bg-slate-50 flex items-center justify-center text-slate-400 text-sm">Chat system connected...</div></div>)}
                    <button onClick={() => setIsOpen(!isOpen)} className={`w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all ${isOpen ? 'bg-slate-700' : 'bg-blue-600 hover:bg-blue-700'}`}>{isOpen ? <LucideIcon name="X" className="w-6 h-6 text-white" /> : <LucideIcon name="MessageSquare" className="w-6 h-6 text-white" />}</button>
                </div>
            );
        };
        
        const SubmenuModal = ({ isOpen, onClose, title, items }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm animate-fadeIn" onClick={onClose}>
                    <div className="bg-white w-full sm:max-w-sm sm:rounded-2xl rounded-t-2xl p-6 shadow-2xl animate-slideUp" onClick={e => e.stopPropagation()}>
                        <div className="flex justify-between items-center mb-4"><h3 className="text-lg font-bold text-slate-800">{title}</h3><button onClick={onClose}><LucideIcon name="X" className="w-5 h-5 text-slate-400" /></button></div>
                        <div className="space-y-2">{items.map((sub, idx) => (<a key={idx} href={sub.url} target="_blank" className="flex items-center gap-3 p-4 rounded-xl border border-slate-100 bg-slate-50 hover:bg-blue-50 hover:border-blue-200 transition-all"><div className="p-2 bg-white rounded-lg shadow-sm"><LucideIcon name={sub.icon} className="w-5 h-5 text-blue-600" /></div><span className="font-semibold text-slate-700 text-sm">{sub.label}</span><LucideIcon name="ExternalLink" className="w-4 h-4 text-slate-300 ml-auto" /></a>))}</div>
                    </div>
                </div>
            );
        };

        // --- APP UTAMA ---
        const App = () => {
            const [activeTab, setActiveTab] = useState('Home');
            const [scrolled, setScrolled] = useState(false);
            const [mobileSubmenu, setMobileSubmenu] = useState(null);
            
            // ADMIN STATE
            const [adminLoginOpen, setAdminLoginOpen] = useState(false);
            const [isAdminLoggedIn, setIsAdminLoggedIn] = useState(false);

            // DEFAULT MENUS (Refactored to use string for icons)
            const DEFAULT_MENUS = [
                { id: 'Home', icon: 'Home', label: 'Home' },
                { id: 'Inventory', icon: 'Box', label: 'Inventory', url: 'https://script.google.com/macros/s/AKfycbyfxx-1B9TAINHUuT4-Zglv_vI3L8QaqzIwMIrlycLofcaaFfdCqJRJUrACewkCLPSi/exec' }, 
                { 
                    id: 'GithubApps', icon: 'Folder', label: 'Delivery',
                    submenu: [
                        { id: 'CetakSPJ', icon: 'Printer', label: 'System Cetak SPJ', url: 'https://my-scm.github.io/SPJ-MKI/' },
                        { id: 'ScanSPJ', icon: 'QrCode', label: 'Aplikasi Scan SPJ', url: 'https://myscm-app.github.io/scand-doc/' }
                    ]
                },
                { id: 'DashboardInventory', icon: 'LayoutDashboard', label: 'Dash. Inv', url: 'https://script.google.com/macros/s/AKfycbzM5MksdebCt3Ua7fCDoiV3uq9K0Q25NBsacZnkDdZLwmO0dUfKokBM2tkprmmFUKVfPw/exec' },
                { id: 'ERP', icon: 'Briefcase', label: 'ERP' },
                { id: 'Ops Support', icon: 'Headphones', label: 'Ops Support' },
                { id: 'Trading', icon: 'TrendingUp', label: 'Trading' },
                { 
                    id: 'Koperasi', icon: 'Users', label: 'Koperasi',
                    submenu: [
                        { id: 'KopApp', icon: 'Globe', label: 'Aplikasi Koperasi', url: 'https://kopkawanmki-byte.github.io/app/' },
                        { id: 'KopInvoice', icon: 'Receipt', label: 'Buat PO & Invoice', url: 'https://kopkawanmki-byte.github.io/Invoice/' }
                    ]
                },
            ];

            const [menuItems, setMenuItems] = useState([]);

            useEffect(() => {
                const handleScroll = () => setScrolled(window.scrollY > 20);
                window.addEventListener('scroll', handleScroll);
                
                // Initialize Menus from LocalStorage or Default
                const savedMenus = localStorage.getItem('scm_menu_config');
                if (savedMenus) {
                    try {
                        setMenuItems(JSON.parse(savedMenus));
                    } catch(e) {
                        setMenuItems(DEFAULT_MENUS);
                    }
                } else {
                    setMenuItems(DEFAULT_MENUS);
                }

                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            const renderContent = () => {
                if (activeTab === 'Admin') return <AdminDashboard menuItems={menuItems} setMenuItems={setMenuItems} />;

                switch(activeTab) {
                    case 'Home': return <HomeContent onNavigate={setActiveTab} />;
                    case 'Inventory': return <InventoryContent />;
                    case 'DashboardInventory': return <DashboardInventoryContent />;
                    case 'ERP': return <ERPContent />;
                    case 'Ops Support': return <OpsSupportContent />;
                    case 'Trading': return <TradingContent />;
                    case 'Koperasi': return <KoperasiContent />;
                    default: return <HomeContent onNavigate={setActiveTab} />;
                }
            };

            const handleMenuClick = (item) => {
                if (item.submenu) {
                    if (window.innerWidth < 1024) setMobileSubmenu(item);
                    return; 
                }
                if (item.url) window.open(item.url, '_blank');
                else setActiveTab(item.id);
            };

            const handleAdminLoginSuccess = () => {
                setAdminLoginOpen(false);
                setIsAdminLoggedIn(true);
                setActiveTab('Admin');
                alert("Login Admin Berhasil!");
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans pb-20 relative overflow-x-hidden selection:bg-blue-200">
                    <AuthModal isOpen={adminLoginOpen} onClose={() => setAdminLoginOpen(false)} onSuccess={handleAdminLoginSuccess} title="Admin Access" requiredUser="admin" requiredPass="123" />
                    
                    <div className="fixed inset-0 z-0 pointer-events-none overflow-hidden">
                        <div className="absolute top-[-10%] left-[-5%] w-[600px] h-[600px] bg-blue-100/40 rounded-full blur-[120px] mix-blend-multiply"></div>
                        <div className="absolute top-[20%] right-[-10%] w-[500px] h-[500px] bg-purple-100/40 rounded-full blur-[100px] mix-blend-multiply"></div>
                    </div>

                    <header className={`fixed top-0 w-full z-40 transition-all duration-300 ${scrolled ? 'bg-white/80 backdrop-blur-xl border-b border-white/60 py-2 shadow-sm' : 'bg-transparent py-4'}`}>
                        <div className="container mx-auto px-4 md:px-6 flex justify-between items-center h-14">
                            <div className="flex items-center gap-3 md:gap-6">
                                <div className="flex items-center gap-2">
                                    <div className="bg-gradient-to-tr from-blue-600 to-cyan-500 p-2 rounded-xl shadow-lg shadow-blue-200"><LucideIcon name="Box" className="w-5 h-5 text-white" /></div>
                                    <span className="text-xl font-bold text-slate-800 tracking-tight hidden md:inline">My SCM <span className="text-blue-600">Center</span></span>
                                </div>
                                <div className="hidden lg:flex items-center bg-slate-100/50 p-1 rounded-xl border border-white/40 shadow-sm backdrop-blur-md">
                                    {menuItems.map((item) => {
                                        const isActive = activeTab === item.id;
                                        if (item.submenu) {
                                            return (
                                                <div key={item.id} className="relative group">
                                                    <button className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-300 hover:bg-white/50 text-slate-500 hover:text-slate-700`}>
                                                        <LucideIcon name={item.icon} className={`w-4 h-4 text-slate-400`} />
                                                        <span className="text-xs font-bold tracking-wide">{item.label}</span>
                                                        <LucideIcon name="ChevronDown" className="w-3 h-3 text-slate-400 group-hover:rotate-180 transition-transform" />
                                                    </button>
                                                    <div className="absolute top-full left-0 pt-2 w-56 hidden group-hover:block z-50 animate-fadeIn">
                                                        <div className="bg-white/90 backdrop-blur-xl rounded-xl shadow-xl border border-slate-100 overflow-hidden p-1">
                                                            {item.submenu.map(sub => (
                                                                <a key={sub.id} href={sub.url} target="_blank" className="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-blue-50 transition-colors group/sub">
                                                                    <div className="p-1.5 bg-slate-100 rounded-md group-hover/sub:bg-blue-100 transition-colors"><LucideIcon name={sub.icon} className="w-3.5 h-3.5 text-slate-500 group-hover/sub:text-blue-600" /></div>
                                                                    <span className="text-xs font-semibold text-slate-600 group-hover/sub:text-blue-600">{sub.label}</span>
                                                                </a>
                                                            ))}
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        }
                                        return (
                                            <button key={item.id} onClick={() => handleMenuClick(item)} className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-300 ${isActive ? 'bg-white shadow-sm text-blue-600' : 'hover:bg-white/50 text-slate-500 hover:text-slate-700'}`}>
                                                <LucideIcon name={item.icon} className={`w-4 h-4 ${isActive ? 'text-blue-600' : 'text-slate-400'}`} />
                                                <span className="text-xs font-bold tracking-wide">{item.label}</span>
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>
                            
                            <div className="flex items-center gap-3">
                                <div className="hidden md:flex relative group">
                                    <LucideIcon name="Search" className="w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2" />
                                    <input type="text" placeholder="Search..." className="bg-white border border-slate-200 rounded-full pl-9 pr-4 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-blue-200 w-40 transition-all" />
                                </div>
                                {/* User Profile / Admin Trigger */}
                                <div 
                                    className={`h-9 w-9 rounded-full overflow-hidden border border-white shadow-sm cursor-pointer ${isAdminLoggedIn ? 'ring-2 ring-blue-500' : ''}`}
                                    onClick={() => !isAdminLoggedIn ? setAdminLoginOpen(true) : setActiveTab('Admin')}
                                    title={isAdminLoggedIn ? "Buka Admin Panel" : "Login Admin"}
                                >
                                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=LogisticsAdmin" alt="User" />
                                </div>
                            </div>
                        </div>
                        
                        <div className="lg:hidden flex justify-around p-2 bg-white border-b border-slate-100 overflow-x-auto no-scrollbar">
                             {menuItems.map((item) => (
                                <button key={item.id} onClick={() => handleMenuClick(item)} className={`flex flex-col items-center min-w-[60px] p-2 rounded-lg ${activeTab === item.id ? 'text-blue-600 bg-blue-50' : 'text-slate-500'}`}>
                                    <LucideIcon name={item.icon} className="w-5 h-5 mb-1" />
                                    <span className="text-[10px] font-bold whitespace-nowrap">{item.label}</span>
                                </button>
                             ))}
                        </div>
                    </header>

                    <main className="container mx-auto px-4 md:px-6 pt-28 pb-12 relative z-10">
                        <div className="mb-8">
                            <h2 className="text-3xl font-bold text-slate-800 mb-1 tracking-tight">{activeTab === 'GithubApps' ? 'GitHub System' : activeTab}</h2>
                            <p className="text-slate-500 text-sm font-medium">Operations Dashboard & Control Center</p>
                        </div>
                        {renderContent()}
                    </main>
                    
                    <SubmenuModal isOpen={!!mobileSubmenu} onClose={() => setMobileSubmenu(null)} title={mobileSubmenu?.label} items={mobileSubmenu?.submenu || []} />
                    <ChatWidget />
                    <FooterTicker />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
